<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ ä¿æŠ¤æ¨¡å¼ä¸»è¦ç”¨äºä¸€ç»„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å­˜åœ¨ç½‘ç»œåˆ†åŒºåœºæ™¯ä¸‹çš„ä¿æŠ¤ï¼Œä¸€æ—¦è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼ŒEureka Serverä¼šå°è¯•ä¿æŠ¤å…¶æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œå°†ä¸å†åˆ é™¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡
 ä¸€å¥è¯æ¦‚æ‹¬: å¦‚æœæŸä¸€æ—¶åˆ»ï¼ŒEureka Serverä¸­æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼ŒEurekaä¸ä¼šç«‹å³æ¸…é™¤ï¼Œè€Œæ˜¯ä¼šå°è¯•å¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ (CAPä¸­çš„AP)
 ä¸ºä»€ä¹ˆéœ€è¦è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶  ä¸ºäº†é˜²æ­¢Eureka Clientå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä¸Eureka Serverç›´æ¥ç½‘ç»œä¸åŒçš„æƒ…å†µä¸‹ï¼ŒEureka Serveré”™è¯¯åœ°å°†å¯ä»¥æ­£å¸¸è¿è¡Œçš„Clientç«¯ç§»é™¤
 é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœEureka Serveråœ¨ä¸€å®šæ—¶é—´å†…(é»˜è®¤90s)æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªæœåŠ¡å®ä¾‹çš„å¿ƒè·³æ—¶ï¼ŒEureka Serverä¼šæ³¨é”€è¯¥å®ä¾‹ã€‚ä½†å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶(å»¶æ—¶ï¼Œæ‹¥æŒ¤)ï¼Œå¾®æœåŠ¡ä¸Eureka Serverä¹‹é—´æ— æ³•æ­£å¸¸é€šè®¯æ—¶ï¼Œè¶…æ—¶ç§»é™¤èŠ‚ç‚¹æ˜¯ä¸æ­£ç¡®çš„è¡Œä¸ºâ€”â€”å¾®æœåŠ¡è‡ªèº«å¾ˆå¯èƒ½æ˜¯æ­£å¸¸çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åº”è¯¥æ³¨é”€æ­¤æœåŠ¡ã€‚
Eurekaé€šè¿‡è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å½“Eureka ServerçŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šClientç«¯æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†è¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚
ä¹Ÿå°±æ˜¯è¯´å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½æ­£å¸¸çš„æœåŠ¡å®ä¾‹
å¦‚ä½•åˆ¤æ–­Eureka æ˜¯å¦è¿›å…¥äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ å¦‚æœåœ¨Eureka Serveré¦–é¡µçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œåˆ™è¯´æ˜Eurekaè¿›å…¥äº†ä¿æŠ¤æ¨¡å¼
 EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&amp;rsquo;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.
 å¦‚ä½•ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ åœ¨Erueka Server ç«¯çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹
eureka:server:# å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶enable-self-preservation:false# ç§»é™¤æœåŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’eviction-interval-timer-in-ms:15000åœ¨Eureka Client ç«¯çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹
eureka:# eureka å®¢æˆ·ç«¯instance:# Eureka Client ç«¯å‘Server ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ï¼Œé»˜è®¤30s# ä¿®æ”¹å¿ƒè·³æ—¶é—´ä¸»è¦æ˜¯å› ä¸ºä¿®æ”¹äº†Server ç«¯çš„è¶…æ—¶æ—¶é—´(15000ms = 15s)# æ‰€ä»¥å¯¹åº”çš„ä¿®æ”¹Client ç«¯çš„å¿ƒè·³æ—¶é—´lease-renewal-interval-in-seconds:5# Eureka Server ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ç§’ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡ï¼Œé»˜è®¤90slease-expiration-duration-in-seconds:15"><title>[ç¬”è®°]SpringCloudå­¦ä¹ 07: Eurekaè‡ªæˆ‘ä¿æŠ¤</title><link rel=canonical href=https://chaosalphard.github.io/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A007-eureka%E8%87%AA%E6%88%91%E4%BF%9D%E6%8A%A4/><link rel=stylesheet href=/scss/style.min.css><meta property="og:title" content="[ç¬”è®°]SpringCloudå­¦ä¹ 07: Eurekaè‡ªæˆ‘ä¿æŠ¤"><meta property="og:description" content="Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ ä¿æŠ¤æ¨¡å¼ä¸»è¦ç”¨äºä¸€ç»„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å­˜åœ¨ç½‘ç»œåˆ†åŒºåœºæ™¯ä¸‹çš„ä¿æŠ¤ï¼Œä¸€æ—¦è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼ŒEureka Serverä¼šå°è¯•ä¿æŠ¤å…¶æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œå°†ä¸å†åˆ é™¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡
 ä¸€å¥è¯æ¦‚æ‹¬: å¦‚æœæŸä¸€æ—¶åˆ»ï¼ŒEureka Serverä¸­æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼ŒEurekaä¸ä¼šç«‹å³æ¸…é™¤ï¼Œè€Œæ˜¯ä¼šå°è¯•å¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ (CAPä¸­çš„AP)
 ä¸ºä»€ä¹ˆéœ€è¦è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶  ä¸ºäº†é˜²æ­¢Eureka Clientå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä¸Eureka Serverç›´æ¥ç½‘ç»œä¸åŒçš„æƒ…å†µä¸‹ï¼ŒEureka Serveré”™è¯¯åœ°å°†å¯ä»¥æ­£å¸¸è¿è¡Œçš„Clientç«¯ç§»é™¤
 é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœEureka Serveråœ¨ä¸€å®šæ—¶é—´å†…(é»˜è®¤90s)æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªæœåŠ¡å®ä¾‹çš„å¿ƒè·³æ—¶ï¼ŒEureka Serverä¼šæ³¨é”€è¯¥å®ä¾‹ã€‚ä½†å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶(å»¶æ—¶ï¼Œæ‹¥æŒ¤)ï¼Œå¾®æœåŠ¡ä¸Eureka Serverä¹‹é—´æ— æ³•æ­£å¸¸é€šè®¯æ—¶ï¼Œè¶…æ—¶ç§»é™¤èŠ‚ç‚¹æ˜¯ä¸æ­£ç¡®çš„è¡Œä¸ºâ€”â€”å¾®æœåŠ¡è‡ªèº«å¾ˆå¯èƒ½æ˜¯æ­£å¸¸çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åº”è¯¥æ³¨é”€æ­¤æœåŠ¡ã€‚
Eurekaé€šè¿‡è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å½“Eureka ServerçŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šClientç«¯æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†è¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚
ä¹Ÿå°±æ˜¯è¯´å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½æ­£å¸¸çš„æœåŠ¡å®ä¾‹
å¦‚ä½•åˆ¤æ–­Eureka æ˜¯å¦è¿›å…¥äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ å¦‚æœåœ¨Eureka Serveré¦–é¡µçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œåˆ™è¯´æ˜Eurekaè¿›å…¥äº†ä¿æŠ¤æ¨¡å¼
 EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&amp;rsquo;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.
 å¦‚ä½•ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ åœ¨Erueka Server ç«¯çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹
eureka:server:# å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶enable-self-preservation:false# ç§»é™¤æœåŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’eviction-interval-timer-in-ms:15000åœ¨Eureka Client ç«¯çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹
eureka:# eureka å®¢æˆ·ç«¯instance:# Eureka Client ç«¯å‘Server ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ï¼Œé»˜è®¤30s# ä¿®æ”¹å¿ƒè·³æ—¶é—´ä¸»è¦æ˜¯å› ä¸ºä¿®æ”¹äº†Server ç«¯çš„è¶…æ—¶æ—¶é—´(15000ms = 15s)# æ‰€ä»¥å¯¹åº”çš„ä¿®æ”¹Client ç«¯çš„å¿ƒè·³æ—¶é—´lease-renewal-interval-in-seconds:5# Eureka Server ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ç§’ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡ï¼Œé»˜è®¤90slease-expiration-duration-in-seconds:15"><meta property="og:url" content="https://chaosalphard.github.io/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A007-eureka%E8%87%AA%E6%88%91%E4%BF%9D%E6%8A%A4/"><meta property="og:site_name" content="Ilirus"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Java"><meta property="article:tag" content="SpringCloud"><meta property="article:tag" content="Eureka"><meta property="article:published_time" content="2020-03-20T03:02:19+00:00"><meta property="article:modified_time" content="2020-03-20T03:02:19+00:00"><meta name=twitter:title content="[ç¬”è®°]SpringCloudå­¦ä¹ 07: Eurekaè‡ªæˆ‘ä¿æŠ¤"><meta name=twitter:description content="Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ ä¿æŠ¤æ¨¡å¼ä¸»è¦ç”¨äºä¸€ç»„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å­˜åœ¨ç½‘ç»œåˆ†åŒºåœºæ™¯ä¸‹çš„ä¿æŠ¤ï¼Œä¸€æ—¦è¿›å…¥ä¿æŠ¤æ¨¡å¼ï¼ŒEureka Serverä¼šå°è¯•ä¿æŠ¤å…¶æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œå°†ä¸å†åˆ é™¤æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡
 ä¸€å¥è¯æ¦‚æ‹¬: å¦‚æœæŸä¸€æ—¶åˆ»ï¼ŒEureka Serverä¸­æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼ŒEurekaä¸ä¼šç«‹å³æ¸…é™¤ï¼Œè€Œæ˜¯ä¼šå°è¯•å¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ (CAPä¸­çš„AP)
 ä¸ºä»€ä¹ˆéœ€è¦è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶  ä¸ºäº†é˜²æ­¢Eureka Clientå¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä¸Eureka Serverç›´æ¥ç½‘ç»œä¸åŒçš„æƒ…å†µä¸‹ï¼ŒEureka Serveré”™è¯¯åœ°å°†å¯ä»¥æ­£å¸¸è¿è¡Œçš„Clientç«¯ç§»é™¤
 é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœEureka Serveråœ¨ä¸€å®šæ—¶é—´å†…(é»˜è®¤90s)æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªæœåŠ¡å®ä¾‹çš„å¿ƒè·³æ—¶ï¼ŒEureka Serverä¼šæ³¨é”€è¯¥å®ä¾‹ã€‚ä½†å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶(å»¶æ—¶ï¼Œæ‹¥æŒ¤)ï¼Œå¾®æœåŠ¡ä¸Eureka Serverä¹‹é—´æ— æ³•æ­£å¸¸é€šè®¯æ—¶ï¼Œè¶…æ—¶ç§»é™¤èŠ‚ç‚¹æ˜¯ä¸æ­£ç¡®çš„è¡Œä¸ºâ€”â€”å¾®æœåŠ¡è‡ªèº«å¾ˆå¯èƒ½æ˜¯æ­£å¸¸çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åº”è¯¥æ³¨é”€æ­¤æœåŠ¡ã€‚
Eurekaé€šè¿‡è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å½“Eureka ServerçŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤šClientç«¯æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†è¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚
ä¹Ÿå°±æ˜¯è¯´å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½æ­£å¸¸çš„æœåŠ¡å®ä¾‹
å¦‚ä½•åˆ¤æ–­Eureka æ˜¯å¦è¿›å…¥äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ å¦‚æœåœ¨Eureka Serveré¦–é¡µçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œåˆ™è¯´æ˜Eurekaè¿›å…¥äº†ä¿æŠ¤æ¨¡å¼
 EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&amp;rsquo;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.
 å¦‚ä½•ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶ åœ¨Erueka Server ç«¯çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹
eureka:server:# å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶enable-self-preservation:false# ç§»é™¤æœåŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’eviction-interval-timer-in-ms:15000åœ¨Eureka Client ç«¯çš„application.ymlæ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹
eureka:# eureka å®¢æˆ·ç«¯instance:# Eureka Client ç«¯å‘Server ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ï¼Œé»˜è®¤30s# ä¿®æ”¹å¿ƒè·³æ—¶é—´ä¸»è¦æ˜¯å› ä¸ºä¿®æ”¹äº†Server ç«¯çš„è¶…æ—¶æ—¶é—´(15000ms = 15s)# æ‰€ä»¥å¯¹åº”çš„ä¿®æ”¹Client ç«¯çš„å¿ƒè·³æ—¶é—´lease-renewal-interval-in-seconds:5# Eureka Server ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ç§’ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡ï¼Œé»˜è®¤90slease-expiration-duration-in-seconds:15"></head><body class=article-page><script>(function(){const a='StackColorScheme';localStorage.getItem(a)||localStorage.setItem(a,"auto")})()</script><script>(function(){const b='StackColorScheme',a=localStorage.getItem(b),c=window.matchMedia('(prefers-color-scheme: dark)').matches===!0;a=='dark'||a==='auto'&&c?document.documentElement.dataset.scheme='dark':document.documentElement.dataset.scheme='light'})()</script><div class="container main-container flex
on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header class=site-info><figure class=site-avatar><img src=/img/avatar_hu3efe4cd0dfb29873d1b0d65561d00585_584028_300x0_resize_box_2.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
<span class=emoji>ğŸŒŒ</span></figure><h1 class=site-name><a href=https://chaosalphard.github.io>Ilirus</a></h1><h2 class=site-description>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></ol></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/%E7%BC%96%E7%A8%8B/>ç¼–ç¨‹</a>
<a href=/categories/%E5%BE%AE%E6%9C%8D%E5%8A%A1/>å¾®æœåŠ¡</a>
<a href=/categories/springcloud/>SpringCloud</a></header><h2 class=article-title><a href=/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A007-eureka%E8%87%AA%E6%88%91%E4%BF%9D%E6%8A%A4/>[ç¬”è®°]SpringCloudå­¦ä¹ 07: Eurekaè‡ªæˆ‘ä¿æŠ¤</a></h2><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Mar 20, 2020</time></div></footer></div></header><section class=article-content><h1 id=eureka-è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶>Eureka è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h1><p>ä¿æŠ¤æ¨¡å¼ä¸»è¦ç”¨äºä¸€ç»„å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å­˜åœ¨ç½‘ç»œåˆ†åŒºåœºæ™¯ä¸‹çš„ä¿æŠ¤ï¼Œä¸€æ—¦è¿›å…¥<code>ä¿æŠ¤æ¨¡å¼</code>ï¼Œ<code>Eureka Server</code>ä¼šå°è¯•ä¿æŠ¤å…¶æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œå°†<strong>ä¸å†åˆ é™¤</strong>æœåŠ¡æ³¨å†Œè¡¨ä¸­çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯<strong>ä¸ä¼šæ³¨é”€ä»»ä½•å¾®æœåŠ¡</strong></p><blockquote><p>ä¸€å¥è¯æ¦‚æ‹¬: å¦‚æœæŸä¸€æ—¶åˆ»ï¼Œ<code>Eureka Server</code>ä¸­æŸä¸ªå¾®æœåŠ¡ä¸å¯ç”¨äº†ï¼Œ<code>Eureka</code>ä¸ä¼šç«‹å³æ¸…é™¤ï¼Œè€Œæ˜¯ä¼šå°è¯•å¯¹è¯¥å¾®æœåŠ¡çš„ä¿¡æ¯è¿›è¡Œä¿å­˜ (CAPä¸­çš„AP)</p></blockquote><h1 id=ä¸ºä»€ä¹ˆéœ€è¦è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶>ä¸ºä»€ä¹ˆéœ€è¦è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h1><blockquote><p>ä¸ºäº†é˜²æ­¢<code>Eureka Client</code>å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†ä¸<code>Eureka Server</code>ç›´æ¥ç½‘ç»œä¸åŒçš„æƒ…å†µä¸‹ï¼Œ<code>Eureka Server</code>é”™è¯¯åœ°å°†å¯ä»¥æ­£å¸¸è¿è¡Œçš„<code>Client</code>ç«¯ç§»é™¤</p></blockquote><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœ<code>Eureka Server</code>åœ¨ä¸€å®šæ—¶é—´å†…(é»˜è®¤90s)æ²¡æœ‰æ¥æ”¶åˆ°æŸä¸ªæœåŠ¡å®ä¾‹çš„å¿ƒè·³æ—¶ï¼Œ<code>Eureka Server</code>ä¼šæ³¨é”€è¯¥å®ä¾‹ã€‚ä½†å½“ç½‘ç»œåˆ†åŒºæ•…éšœå‘ç”Ÿæ—¶(å»¶æ—¶ï¼Œæ‹¥æŒ¤)ï¼Œå¾®æœåŠ¡ä¸<code>Eureka Server</code>ä¹‹é—´æ— æ³•æ­£å¸¸é€šè®¯æ—¶ï¼Œè¶…æ—¶ç§»é™¤èŠ‚ç‚¹æ˜¯ä¸æ­£ç¡®çš„è¡Œä¸ºâ€”â€”å¾®æœåŠ¡è‡ªèº«å¾ˆå¯èƒ½æ˜¯æ­£å¸¸çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸åº”è¯¥æ³¨é”€æ­¤æœåŠ¡ã€‚</p><p><code>Eureka</code>é€šè¿‡<code>è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜â€”â€”å½“<code>Eureka Server</code>çŸ­æ—¶é—´å†…ä¸¢å¤±è¿‡å¤š<code>Client</code>ç«¯æ—¶ï¼Œé‚£ä¹ˆè¿™ä¸ªèŠ‚ç‚¹å°†è¿›å…¥è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å®å¯ä¿ç•™é”™è¯¯çš„æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šç›²ç›®æ³¨é”€ä»»ä½•å¯èƒ½æ­£å¸¸çš„æœåŠ¡å®ä¾‹</p><h1 id=å¦‚ä½•åˆ¤æ–­eureka-æ˜¯å¦è¿›å…¥äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼>å¦‚ä½•åˆ¤æ–­Eureka æ˜¯å¦è¿›å…¥äº†è‡ªæˆ‘ä¿æŠ¤æ¨¡å¼</h1><p>å¦‚æœåœ¨<code>Eureka Server</code>é¦–é¡µçœ‹åˆ°ä»¥ä¸‹æç¤ºï¼Œåˆ™è¯´æ˜<code>Eureka</code>è¿›å…¥äº†ä¿æŠ¤æ¨¡å¼</p><blockquote><p><span style=color:#d88>EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&rsquo;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.</span></p></blockquote><h1 id=å¦‚ä½•ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶>å¦‚ä½•ç¦æ­¢è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</h1><p>åœ¨Erueka Server ç«¯çš„<code>application.yml</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹</p><div class=highlight><pre class=chroma><code class=language-yml data-lang=yml><span class=nt>eureka</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=nt>server</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=c># å…³é—­è‡ªæˆ‘ä¿æŠ¤æœºåˆ¶</span><span class=w>
</span><span class=w>    </span><span class=nt>enable-self-preservation</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span><span class=w>    </span><span class=c># ç§»é™¤æœåŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’</span><span class=w>
</span><span class=w>    </span><span class=nt>eviction-interval-timer-in-ms</span><span class=p>:</span><span class=w> </span><span class=m>15000</span><span class=w>
</span></code></pre></div><p>åœ¨Eureka Client ç«¯çš„<code>application.yml</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹</p><div class=highlight><pre class=chroma><code class=language-yml data-lang=yml><span class=nt>eureka</span><span class=p>:</span><span class=w> </span><span class=c># eureka å®¢æˆ·ç«¯</span><span class=w>
</span><span class=w>  </span><span class=nt>instance</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=c># Eureka Client ç«¯å‘Server ç«¯å‘é€å¿ƒè·³çš„æ—¶é—´é—´éš”ï¼Œå•ä½ç§’ï¼Œé»˜è®¤30s</span><span class=w>
</span><span class=w>    </span><span class=c># ä¿®æ”¹å¿ƒè·³æ—¶é—´ä¸»è¦æ˜¯å› ä¸ºä¿®æ”¹äº†Server ç«¯çš„è¶…æ—¶æ—¶é—´(15000ms = 15s)</span><span class=w>
</span><span class=w>    </span><span class=c># æ‰€ä»¥å¯¹åº”çš„ä¿®æ”¹Client ç«¯çš„å¿ƒè·³æ—¶é—´</span><span class=w>
</span><span class=w>    </span><span class=nt>lease-renewal-interval-in-seconds</span><span class=p>:</span><span class=w> </span><span class=m>5</span><span class=w>
</span><span class=w>    </span><span class=c># Eureka Server ç«¯åœ¨æ”¶åˆ°æœ€åä¸€æ¬¡å¿ƒè·³åç­‰å¾…æ—¶é—´ä¸Šé™ï¼Œå•ä½ç§’ï¼Œè¶…æ—¶å°†å‰”é™¤æœåŠ¡ï¼Œé»˜è®¤90s</span><span class=w>
</span><span class=w>    </span><span class=nt>lease-expiration-duration-in-seconds</span><span class=p>:</span><span class=w> </span><span class=m>15</span><span class=w>
</span></code></pre></div></section><footer class=article-footer><section class=article-tags><a href=/tags/java/>Java</a>
<a href=/tags/springcloud/>SpringCloud</a>
<a href=/tags/eureka/>Eureka</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><aside class=related-contents--wrapper><h2 class=section-title>ç›¸å…³æ–‡ç« </h2><div class=related-contents><div class="flex article-list--tile"><article><a href=/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A006-eureka%E6%9C%8D%E5%8A%A1%E5%8F%91%E7%8E%B0/><div class=article-details><h2 class=article-title>[ç¬”è®°]SpringCloudå­¦ä¹ 06: EurekaæœåŠ¡å‘ç°</h2></div></a></article><article><a href=/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A005-%E6%9C%8D%E5%8A%A1%E6%8F%90%E4%BE%9B%E6%96%B9%E9%9B%86%E7%BE%A4/><div class=article-details><h2 class=article-title>[ç¬”è®°]SpringCloudå­¦ä¹ 05: æœåŠ¡æä¾›æ–¹é›†ç¾¤</h2></div></a></article><article><a href=/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A004-eureka%E9%9B%86%E7%BE%A4/><div class=article-details><h2 class=article-title>[ç¬”è®°]SpringCloudå­¦ä¹ 04: Eurekaé›†ç¾¤</h2></div></a></article><article><a href=/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A003-eureka%E7%9A%84%E6%90%AD%E5%BB%BA/><div class=article-details><h2 class=article-title>[ç¬”è®°]SpringCloudå­¦ä¹ 03: Eurekaçš„æ­å»º</h2></div></a></article><article><a href=/p/%E7%AC%94%E8%AE%B0springcloud%E5%AD%A6%E4%B9%A002-eureka%E5%9F%BA%E7%A1%80/><div class=article-details><h2 class=article-title>[ç¬”è®°]SpringCloudå­¦ä¹ 02: EurekaåŸºç¡€</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2020 -
2024 Ilirus</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.2.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous defer></script><script type=text/javascript src=/ts/main.js defer></script><script>(function(){const a=document.createElement('link');a.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",a.type="text/css",a.rel="stylesheet",document.head.appendChild(a)})()</script></body></html>